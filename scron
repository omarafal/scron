#!/bin/bash

# help menu
print_help() {
	echo "Correct usage:"
	echo -e "scron [OPTION]\n"
	echo "Options:"
	echo -e "  -h\tdisplay help menu"
	echo -e "  -f\tspecify commands file"
	echo -e "  -p\tpurge; empty ALL scheduled commands"
	echo -e "  -l\tlist scheduled commands"
}

# handle commands file
file(){
	#cat $1
	if [ -f $1 ]
	then
		#echo "File exists."
		cat $1 | python3 $(dirname $0)/parse_content.py
	else
		echo "[ERROR] No such file found."
	fi

}

# options
while getopts ":hf:pl" opt
do
	case $opt in
		h) print_help;;
		f) file $OPTARG;;
		p) crontab -r;;
		l) cat $(dirname $0)/current_cmds.scron;;
		:) echo "[ERROR] scron -$OPTARG requires argument(s)";;
		\?) echo -e "[ERROR] Invalid option\n" && print_help;;
		*) echo "Error"
	esac
done
